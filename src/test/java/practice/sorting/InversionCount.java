package practice.sorting;

import java.util.ArrayList;
import java.util.Arrays;

public class InversionCount {
    public static int count = 0;
    public static void main(String[] args) {
//        ArrayList<Integer> A = new ArrayList<>(Arrays.asList(4,5,1,2,7,3));
        ArrayList<Integer> A = new ArrayList<>(Arrays.asList(40861, 67102, 26244, 12788, 49129, 9078, 8176, 24618, 58742, 46622, 11425, 90522, 84356, 48905, 42756, 14325, 81171, 28273, 49197, 6385, 1734, 93718, 22165, 60616, 68345, 49402, 39513, 54861, 87481, 48630, 42907, 28040, 26506, 3906, 51038, 49771, 74209, 85736, 48459, 74036, 93116, 70635, 99435, 76973, 58779, 59332, 96748, 90604, 38403, 81390, 8506, 84763, 34730, 74412, 9596, 19515, 47283, 55525, 9212, 61562, 64794, 51238, 50048, 15711, 72277, 24810, 24590, 60176, 71348, 96722, 93306, 89540, 91541, 47622, 97309, 73315, 20304, 7941, 33423, 20694, 53845, 61943, 4437, 44756, 50108, 81109, 90159, 35692, 5620, 80034, 4048, 49657, 75082, 65018, 47287, 18500, 83670, 37663, 91217, 49922, 23766, 86678, 65918, 86024, 44493, 23285, 93451, 20667, 55776, 66615, 24005, 74722, 35229, 44458, 79950, 56393, 44046, 88309, 92774, 33102, 48316, 20413, 57621, 31974, 52046, 63714, 87925, 6626, 56568, 65740, 58227, 31544, 47308, 78186, 37742, 64823, 90761, 58400, 8532, 64276, 76357, 55436, 5782, 56783, 91312, 56650, 73698, 47268, 31283, 40019, 88254, 5042, 91359, 81099, 86049, 63117, 95796, 74247, 55796, 37634, 62222, 14328, 11691, 529, 72948, 68671, 64090, 9834, 82220, 88933, 51935, 96640, 33123, 34985, 4481, 85569, 8149, 68715, 29837, 94111, 72324, 7099, 82623, 719, 15744, 80686, 10654, 8329, 2939, 68167, 87366, 8745, 50033, 13543, 67929, 41846, 85240, 50271, 9525, 79808, 59146, 67893, 35766, 60223, 18077, 50389, 55960, 61459, 31860, 91537, 33302, 99783, 35702, 25089, 33455, 22570, 6932, 82578, 84827, 26647, 37170, 57550, 14313, 96808, 30643, 56321, 86370, 73423, 32298, 1758, 48369, 61988, 90848, 89401, 53551, 5749, 79022, 33198, 34059, 76117, 43824, 8651, 44269, 14401, 13179, 47029, 99364, 90025, 99580, 94147, 75277, 76094, 23092, 98006, 80183, 98484, 43799, 49837, 55121, 69037, 99006, 12084, 74284, 44772, 7209, 23072, 7201, 83656, 23774, 13467, 13094, 40610, 11456, 17635, 39580, 11851, 26691, 45431, 62579, 92525, 41700, 50690, 91079, 55701, 54878, 72977, 76713, 62675, 21476, 89128, 3182, 18566, 62222, 97523, 69052, 80200, 83617, 75997, 44284, 88460, 93695, 70288, 7837, 17435, 94017, 64078, 8530, 47238, 99531, 53379, 52794, 2272, 73910, 59490, 40534, 94258, 58744, 11876, 99334, 15112, 37960, 40772, 13449, 12857, 94707, 92416, 97396, 93106, 27657, 37448, 80541, 71633, 39875, 72733, 15993, 35896, 24457, 19675, 86125, 21600, 32999, 56669, 62600, 52949, 68666, 46083, 30450, 38289, 6199, 27268, 97810, 19380, 6820, 60847, 81060, 75592, 98245, 38506, 19753, 71749, 34858, 73112, 77784, 89546, 51749, 98027, 4571, 50403, 87369, 51761, 31417, 88683, 49735, 28764, 50188, 48993, 59718, 97729, 83952, 8550, 24975, 66404, 63674, 96490, 20365, 16355, 58310, 47223, 61512, 34901, 38348, 28875, 63745, 97236, 77289, 6806, 93858, 66615, 38072, 72171, 3684, 94424, 92873, 30909, 44504, 11480, 4159, 37100, 29899, 37366, 8890, 5730, 16878, 42027, 59520, 82691, 15687, 20181, 62075, 37520, 83836, 83460, 35047, 9302, 62823, 54896, 74412, 50889, 84959, 73148, 35585, 64145, 85917, 34278, 53113, 22371, 20126, 96654, 85889, 5442, 77648, 23465, 31434, 28578, 61032, 10256, 76, 12814, 23061, 87321, 99404, 31543, 52089, 47065, 63180, 36584, 5051, 61110, 48073, 39142, 26887, 71664, 46628, 29595, 86674, 70086, 62999, 20348, 56561, 74221, 86993, 4605, 80762, 61095, 42030, 4333, 78916, 74041, 19967, 85247, 15809, 54808, 96291, 973, 35281, 69038, 39999, 55328, 98948, 46263, 61212, 9571, 93578, 39869, 21069, 70309, 4934, 36495, 98863, 95651, 14235, 9612, 86402, 22665, 42058, 52792, 67685, 55524, 83253, 34960, 64297, 8984, 55443, 24883, 92475, 85468, 49329, 1417, 48275, 78189, 65172, 28721, 5458, 63527, 31599, 48548, 14429, 91578, 64235, 90219, 79827, 92471, 23124, 58301, 16925, 65936, 77573, 131, 10030, 37993, 77606, 72230, 23353, 39402, 15485, 39023, 44258, 93004, 73935, 7963, 15532, 432, 81821, 11841, 68874, 7785, 26987, 28693, 83361, 64534, 23510, 21146, 91838, 75981, 49176, 17806, 50377, 10990, 93544, 38822, 52467, 68365, 28556, 29846, 14487, 45402, 37325, 62007, 66920, 97589, 77926, 58133, 63715, 68966, 58153, 55874, 80972, 6718, 6805, 7253, 56504, 775, 30114, 6393, 24473, 64183, 55095, 46610, 54112, 69359, 67333, 95407, 60799, 36623, 7934, 15649, 8628, 56309, 71879, 95280, 35767, 30097, 57544, 7765, 71857, 24550, 39155, 32143, 92875, 2474, 87478, 26581, 24238, 92342, 42436, 45313, 4449, 85210, 24287, 13651, 75146, 82258, 91348, 42202, 1463, 61123, 2303, 74848, 12815, 47783, 57360, 49054, 30015, 10184, 17260, 28786, 6400, 56041, 80343, 74911, 54736, 6182, 28326, 283, 69661, 51824, 3952, 56023, 24993, 81110, 94507, 46591, 31441, 66045, 47255, 43842, 48401, 9594, 63803, 67687, 24256, 59693, 44959, 45138, 63814, 70366, 63872, 96917, 18633, 92457, 37101, 60638, 15284, 25979, 54122, 66630, 13253, 66576, 13729, 91416, 89181, 92020, 53064, 3772, 89188, 89952, 45247, 56405, 20891, 35088, 51842, 22211, 78112, 41267, 54590, 49715, 80156, 75458, 24098, 60628, 16144, 45747, 47760, 18087, 10415, 97623, 25147, 62032, 69695, 45109, 86161, 928, 17402, 22682, 18105, 68052, 97598, 65609, 56169, 97676, 64989, 89900, 65518, 72471, 65280, 16976, 59787, 92366, 55007, 42811, 33134, 4770, 64967, 6352, 42668, 15511, 97378, 83877, 6048, 30690, 63805, 36082, 10444, 29157, 39675, 87830, 7613, 67664, 48395, 19953, 56952, 33086, 97646, 45009, 78541, 6747, 21801, 70403, 20501, 32086, 6151, 41443, 60324, 9360, 24274, 15425, 86679, 39008, 47827, 75637, 60167, 12158, 52187, 60486, 74057, 20901, 75431, 45599, 84247, 15087, 74314, 84207, 52800, 21264, 15934, 44292, 3812, 97855, 58454, 83987, 83120, 31858, 80293, 41419, 7552, 19505, 23142, 50062, 22664, 2531, 27936, 16888, 4133, 77231, 32594, 73023, 21667, 2044, 88797, 74782, 28971, 16631, 27201, 8629, 43948, 14397, 96603, 21963, 54344, 87915, 89483, 85977, 28385, 72774, 27661, 13834, 97208, 93791, 82001, 43748, 89567, 7785, 87782, 62721, 25546, 33615, 64021, 49280, 92639, 88518, 91562, 12930, 63382, 52179, 50410, 82929, 33001, 2530, 25816, 66686, 16112, 20823, 90031, 32309, 31808, 33883, 70951, 17567, 68406, 33427, 28368, 76557, 94837, 83077, 84391, 98432, 78062, 33203, 28776, 26165, 45831, 70197, 70294, 25705, 35100, 42876, 22397, 61615, 31167, 64578, 37430, 67231, 61476, 25114, 86819, 85628, 88729, 84281, 81032, 21556, 40741, 61985, 23260, 92870, 87299, 93818, 5906, 40815, 22702, 6336, 25993, 65688, 17185, 11281, 44820, 48349, 97946, 60195, 54478, 51170, 77192, 31452, 8281, 98292, 5937, 32338, 26318, 14098, 13244, 36799, 63457, 88048, 72203, 20765, 62408, 11814, 54276, 66965, 42783, 27372, 10214, 86316, 20798, 20692, 18476, 77360, 95639, 14127, 10433, 440, 68715, 31786, 52073, 10845, 3566, 27896, 18224, 65694, 63292, 81366, 1658, 21991, 86577, 81694, 7000, 30522, 980, 96322, 20154, 50665, 97696, 67602, 94356, 33213, 47057, 54924, 35133, 56726, 3591, 2690, 55566, 75890, 57293, 86553, 68649, 56613, 23395, 66075, 39305, 79108, 13974, 95317, 35037, 65681, 26446, 68727, 61444, 38345, 57179, 59540, 9745, 49812, 58217, 45565, 20136, 446, 23641, 30791, 76621, 68425, 53786, 20500, 51082, 33005, 49354, 69567, 2882, 59906, 90436, 83477, 990, 57218, 73869, 30601, 96213, 40551, 43315, 26762, 19182, 24389, 13543, 32918, 18090, 21994, 40141, 15638, 11883, 36260, 17951, 75059, 1876, 59759, 20605, 75098, 96471, 11798, 19503, 52443, 18655, 66157, 91804, 96277, 20163, 86253, 22801, 61630, 14829, 15366, 92301, 32865, 53932, 90579, 6024, 97506, 83323, 40395, 52845, 46170, 10344, 65472, 49367, 93992, 85566, 31501, 50942, 71058, 28895, 48207, 90313, 54762, 82371, 56499, 8892, 24315, 70105, 19129, 39088, 74471, 43457, 15402, 26602, 19806, 20535, 38906, 29169, 33158, 39561, 47925, 96324, 68116, 89540, 50625, 98394, 71984, 68417, 88036, 11059, 92265, 38164, 37491, 88594, 48190, 35825, 88946, 39796, 69075, 12961, 36682, 1280, 50022, 19223, 11154, 43310, 88853, 67283, 90329, 65067, 92728, 58513, 79173, 38305, 7429, 81425, 35665, 43241, 48787, 39178, 88608, 41202, 98974, 74002, 91984, 19704, 25912, 73538, 9749, 3052, 86814, 91182, 54722, 39727, 97123, 2331, 33301, 15209, 88627, 52217, 10582, 30218, 95667, 80660, 4233, 3551, 39429, 87435, 13593, 45380, 49152, 90386, 72191, 55478, 13378, 68559, 97557, 3208, 39478, 63121, 66503, 66617, 17600, 46109, 48880, 30536, 37405, 41249, 505, 48350, 87542, 97159, 47353, 13736, 43272, 45268, 61, 89649, 27611, 30012, 90351, 73922, 85716, 59705, 45624, 74891, 69390, 2466, 58923, 77458, 81611, 65596, 37127, 15428, 46853, 25763, 9818, 68834, 6604, 16388, 221, 77080, 89069, 85317, 39390, 24955, 7739, 94442, 65879, 89364, 69957, 29133, 99880, 3085, 57609, 46816, 98948, 99996, 42147, 5119, 10669, 35397, 86131, 96368, 40943, 44336, 75456, 75957, 22399, 94077, 61546, 39822, 77420, 39574, 37415, 81810, 33672, 97400, 11575, 59624, 56791, 22963, 29761, 35271, 5967, 88085, 44704, 91285, 89420, 68813, 63493, 33960, 94754, 18050, 59755, 67323, 20339, 68670, 47284, 85068, 71135, 42218, 52632, 64564, 58539, 65610, 40665, 72345, 62464, 37954, 48040, 30243, 43394, 85968, 86290, 44022, 49714, 89285, 28800, 82854, 75547, 21594, 43279, 73180, 90307, 40811, 21625, 45582, 37741, 81816, 98452, 15140, 64538, 28857, 62999, 46752, 10255, 54695, 50868, 85236, 75165, 56537, 19885, 69268, 63852, 55973, 5737, 62763, 14706, 56811, 26866, 26465, 66275, 95649, 44074, 88236, 97923, 29070, 15973, 2722, 59074, 10437, 4473, 96814, 61194, 53578, 97590, 47126, 41704, 2710, 62559, 47446, 83264, 32994, 71143, 61012, 29592, 40698, 16335, 2689, 90729, 40907, 27183, 57528, 62009, 51903, 65049, 45053, 40277, 61687, 92168, 62063, 44522, 60040, 41721, 62179, 85077, 61249, 77622, 76108, 58909, 11243, 48478, 10003, 6857, 59367, 38971, 24136, 26849, 48766, 70085, 5344, 12550, 85214, 33050, 27114, 312, 48015, 47613, 16682, 68468, 61809, 77220, 37323, 52958, 2344, 40845, 5102, 50797, 88190, 43062, 37017, 11465, 92227, 91505, 9541, 93361, 34353, 87717, 51604, 89258, 92474, 42160, 92464, 30866, 89833, 85634, 27998, 53462, 91075, 89525, 7961, 34990, 41329, 38459, 62393, 23827, 62601, 42490, 25797, 93200, 16635, 92989, 35097, 69538, 62784, 82811, 29095, 9847, 33893, 3317, 10703, 54787, 20726, 72357, 71512, 29320, 55838, 59596, 62200, 69181, 93732, 71443, 25975, 3962, 75549, 83495, 62721, 65627, 542, 26550, 20505, 35729, 86550, 60003, 40704, 51233, 64668, 2080, 1405, 40535, 58280, 38084, 37274, 32828, 7511, 57764, 52903, 49058, 58324, 33685, 54946, 6545, 56808, 85119, 9640, 12076, 55881, 4466, 94910, 81375, 50801, 61091, 79867, 39899, 25882, 81333, 92101, 96589, 41545, 65182, 64240, 44437, 15728, 20706, 9738, 73176, 88605, 64346, 5072, 89727, 80317, 19608, 59221, 62885, 47360, 48617, 81449, 52613, 61608, 76096, 16217, 88381, 32444, 36762, 44471, 19780, 56948, 3579, 59962, 53822, 77046, 3257, 69175, 84164, 20119, 27888, 25456, 21607, 43210, 22439, 3188, 73603, 174, 87148, 88506, 98401, 44212, 52275, 35016, 52244, 20041, 1411, 45678, 40975, 43023, 96097, 51448, 61149, 49583, 86459, 17216, 81275, 10861, 6998, 3139, 83684, 18181, 37037, 92231, 77162, 96869, 42512, 82044, 974, 16264, 81050, 38100, 51795, 49172, 19963, 62072, 89595, 60277, 51809, 58555, 64774, 62513, 7394, 75897, 58026, 8880, 60235, 57207, 22412, 23236, 70064, 76033, 71538, 2131, 59424, 16940, 66472, 55855, 61135, 25253, 53844, 414, 9518, 91293, 99425, 96511, 75985, 27349, 90519, 35923, 86034, 35411, 65987, 12392, 18127, 51120, 55375, 10929, 91274, 41020, 3992, 80075, 76365, 87566, 66216, 70890, 38819, 90882, 98099, 61189, 84386, 10598, 10442, 3849, 87880, 94939, 33603, 52038, 10692, 2654, 95699, 90910, 88242, 50259, 52808, 71985, 32925, 70142, 4436, 26211, 14161, 84883, 36075, 49075, 80149, 85408, 79871, 26609, 73357, 40334, 77320, 44901, 27110, 95694, 28522, 51437, 14296, 44633, 13039, 18328, 11104, 94202, 20985, 46631, 63197, 76027, 20388, 63771, 55686, 94305, 75871, 505, 17646, 95090, 71834));
        sort(A,0,A.size()-1);
        System.out.println(A);
        System.out.println(count);

    }
    public static void sort(ArrayList<Integer> A,int l,int r){
        int mod = (int)(Math.pow(10,9)+7);
        if (l<r){
            int mid = (l+r)/2;
            sort(A,l,mid);
            sort(A,mid+1,r);
            count = ((count % mod) + (merge(A,l,mid,r) % mod))%mod;
        }
    }
    public static int merge(ArrayList<Integer> A,int l,int m,int r){
        int cnt = 0;
        int n1 = m-l+1;
        int n2 = r-m;
        ArrayList<Integer> left = new ArrayList<>();
        ArrayList<Integer> right = new ArrayList<>();

        for (int i=0;i<n1;++i){
            left.add(A.get(l+i));
        }
        for (int i=0;i<n2;++i){
            right.add(A.get(m+1+i));
        }
        int i = 0 ,j = 0;
        int k = l;
        while (i<n1 && j<n2){
            if (left.get(i)<=right.get(j)){
               A.set(k,left.get(i));
               i++;
            }else {
                A.set(k,right.get(j));
                cnt += n1-i;
                j++;
            }
            k++;
        }
        while (i<n1){
            A.set(k,left.get(i++));
            k++;
        }
        while (j<n2){
            A.set(k,right.get(j++));
            k++;
        }
        return cnt % (int)(Math.pow(10,9)+7);
    }
}
